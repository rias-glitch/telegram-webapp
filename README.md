# Telegram WebApp Gaming Platform

–ò–≥—Ä–æ–≤–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è Telegram —Å PvE –∏ PvP –∏–≥—Ä–∞–º–∏, —Å–∏—Å—Ç–µ–º–æ–π –∫–≤–µ—Å—Ç–æ–≤ –∏ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–æ–º.

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [Backend - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏](#backend---—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ-—Ñ—É–Ω–∫—Ü–∏–∏)
- [Frontend - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏](#frontend---—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ-—Ñ—É–Ω–∫—Ü–∏–∏)
- [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
- [–ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞](#–∑–∞–ø—É—Å–∫-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ò–¥–µ–∏ –¥–ª—è –º–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏–∏](#–∏–¥–µ–∏-–¥–ª—è-–º–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏–∏)

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
telegram-webapp/
‚îú‚îÄ‚îÄ backend/                 # Go + Gin + PostgreSQL
‚îÇ   ‚îú‚îÄ‚îÄ cmd/app/            # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ domain/         # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ http/handlers/  # API —Ö–µ–Ω–¥–ª–µ—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware/     # JWT, Rate Limiting
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repository/     # –†–∞–±–æ—Ç–∞ —Å –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ service/        # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ws/             # WebSocket –¥–ª—è PvP
‚îÇ   ‚îî‚îÄ‚îÄ migrations/         # SQL –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ
‚îî‚îÄ‚îÄ frontend-new/           # React + Vite + Tailwind
    ‚îî‚îÄ‚îÄ src/
        ‚îú‚îÄ‚îÄ api/            # HTTP –∫–ª–∏–µ–Ω—Ç
        ‚îú‚îÄ‚îÄ components/     # UI –∏ –∏–≥—Ä–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
        ‚îú‚îÄ‚îÄ hooks/          # React —Ö—É–∫–∏
        ‚îî‚îÄ‚îÄ pages/          # –°—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- Backend: Go 1.21+, Gin, pgx/v5, JWT, WebSocket
- Frontend: React 18, Vite 5, Tailwind CSS 3, React Router 6
- Database: PostgreSQL 15+
- Real-time: Native WebSocket

---

## Backend - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### API Endpoints (19 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤)

#### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| POST | `/api/auth` | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram initData |

- –í–∞–ª–∏–¥–∞—Ü–∏—è HMAC-SHA256 –ø–æ–¥–ø–∏—Å–∏ Telegram
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JWT —Ç–æ–∫–µ–Ω–∞ (24 —á–∞—Å–∞)
- DEV_MODE –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ Telegram

#### –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| GET | `/api/me` | –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ |
| GET | `/api/profile` | –ü—Ä–æ—Ñ–∏–ª—å —Å –±–∞–ª–∞–Ω—Å–æ–º –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ |
| POST | `/api/profile/balance` | –ò–∑–º–µ–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ (admin) |
| GET | `/api/profile/:id` | –ü—É–±–ª–∏—á–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |

#### –ò–≥—Ä—ã (PvE)
| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| POST | `/api/game/coinflip` | Coin Flip - 50/50 —à–∞–Ω—Å, x2 |
| POST | `/api/game/rps` | Rock Paper Scissors vs Bot |
| POST | `/api/game/mines` | Mines - 8 safe / 4 mines, x2 |
| POST | `/api/game/case` | Case - –ª—É—Ç–±–æ–∫—Å (100 gems) |

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∏—Å—Ç–æ—Ä–∏—è
| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| GET | `/api/me/games` | –ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä + –º–µ—Å—è—á–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ |
| GET | `/api/top` | –¢–æ–ø-50 –∏–≥—Ä–æ–∫–æ–≤ –ø–æ –ø–æ–±–µ–¥–∞–º |
| GET | `/api/history` | –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π |
| POST | `/api/history` | –ó–∞–ø–∏—Å–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é |

#### –ö–≤–µ—Å—Ç—ã
| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| GET | `/api/quests` | –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–≤–µ—Å—Ç–æ–≤ |
| GET | `/api/me/quests` | –ü—Ä–æ–≥—Ä–µ—Å—Å –∫–≤–µ—Å—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| POST | `/api/quests/:id/claim` | –ó–∞–±—Ä–∞—Ç—å –Ω–∞–≥—Ä–∞–¥—É –∑–∞ –∫–≤–µ—Å—Ç |

#### WebSocket (PvP)
| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| GET | `/ws` | WebSocket –¥–ª—è PvP –∏–≥—Ä |

Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: `token=<jwt>`, `game=rps|mines`

---

### –ò–≥—Ä–æ–≤–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞

#### CoinFlip (PvE)
```
–°—Ç–∞–≤–∫–∞: –ª—é–±–∞—è —Å—É–º–º–∞
–®–∞–Ω—Å: 50/50
–í—ã–∏–≥—Ä—ã—à: bet √ó 2
–ü—Ä–æ–∏–≥—Ä—ã—à: -bet
```

#### Rock Paper Scissors (PvE)
```
–°—Ç–∞–≤–∫–∞: –ª—é–±–∞—è —Å—É–º–º–∞ (–º–æ–∂–Ω–æ 0)
–ú–µ—Ö–∞–Ω–∏–∫–∞: rock > scissors > paper > rock
–í—ã–∏–≥—Ä—ã—à: bet √ó 2
–ù–∏—á—å—è: –≤–æ–∑–≤—Ä–∞—Ç —Å—Ç–∞–≤–∫–∏
–ü—Ä–æ–∏–≥—Ä—ã—à: -bet
```

#### Mines (PvE)
```
–°—Ç–∞–≤–∫–∞: –ª—é–±–∞—è —Å—É–º–º–∞
–ü–æ–ª–µ: 12 —è—á–µ–µ–∫ (4 –º–∏–Ω—ã, 8 –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö)
–í—ã–±–æ—Ä: 1 —è—á–µ–π–∫–∞
–ë–µ–∑–æ–ø–∞—Å–Ω–æ: bet √ó 2
–ú–∏–Ω–∞: -bet
```

#### Case/Roulette (Solo)
```
–°—Ç–æ–∏–º–æ—Å—Ç—å: 100 gems
–ü—Ä–∏–∑—ã:
‚îú‚îÄ‚îÄ Case 1: 250 gems  (50% —à–∞–Ω—Å)
‚îú‚îÄ‚îÄ Case 2: 500 gems  (20% —à–∞–Ω—Å)
‚îú‚îÄ‚îÄ Case 3: 750 gems  (15% —à–∞–Ω—Å)
‚îú‚îÄ‚îÄ Case 4: 1000 gems (10% —à–∞–Ω—Å)
‚îî‚îÄ‚îÄ Case 5: 5000 gems (5% —à–∞–Ω—Å)
```

#### PvP RPS (WebSocket)
```
–ú–∞—Ç—á–º–µ–π–∫–∏–Ω–≥: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π
–¢–∞–π–º–∞—É—Ç —Ö–æ–¥–∞: 20 —Å–µ–∫—É–Ω–¥
–ú–µ—Ö–∞–Ω–∏–∫–∞: –æ–±–∞ –∏–≥—Ä–æ–∫–∞ –≤—ã–±–∏—Ä–∞—é—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
–†–µ–∑—É–ª—å—Ç–∞—Ç: win/lose/draw
```

#### PvP Mines (WebSocket)
```
–§–∞–∑–∞ 1 - Setup (10 —Å–µ–∫):
  –ö–∞–∂–¥—ã–π –∏–≥—Ä–æ–∫ —Ä–∞–∑–º–µ—â–∞–µ—Ç 4 –º–∏–Ω—ã –Ω–∞ —Å–≤–æ—ë–º –ø–æ–ª–µ

–§–∞–∑–∞ 2 - Playing (10 —Å–µ–∫/—Ö–æ–¥, –º–∞–∫—Å 5 —Ä–∞—É–Ω–¥–æ–≤):
  –ò–≥—Ä–æ–∫–∏ –ø–æ –æ—á–µ—Ä–µ–¥–∏ –≤—ã–±–∏—Ä–∞—é—Ç —è—á–µ–π–∫–∏ —Å–æ–ø–µ—Ä–Ω–∏–∫–∞
  –ü–æ–ø–∞–ª –Ω–∞ –º–∏–Ω—É = –ø—Ä–æ–∏–≥—Ä–∞–ª

–†–µ–∑—É–ª—å—Ç–∞—Ç: –ø–µ—Ä–≤—ã–π –Ω–∞ –º–∏–Ω–µ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç / –Ω–∏—á—å—è –ø–æ—Å–ª–µ 5 —Ä–∞—É–Ω–¥–æ–≤
```

---

### WebSocket –ø—Ä–æ—Ç–æ–∫–æ–ª

#### Client ‚Üí Server
```json
{ "type": "move", "data": { "move": "rock" } }           // RPS
{ "type": "move", "data": { "positions": [1,2,3,4] } }   // Mines setup
{ "type": "move", "data": { "move": 5 } }                // Mines pick
{ "type": "ping" }
```

#### Server ‚Üí Client
```json
{ "type": "ready" }
{ "type": "state", "data": { "room_id": "...", "players": 2 } }
{ "type": "start" }
{ "type": "result", "data": { "you": "win", "reason": "..." } }
{ "type": "error", "data": { "message": "..." } }
```

---

### –°–∏—Å—Ç–µ–º–∞ –∫–≤–µ—Å—Ç–æ–≤

**–¢–∏–ø—ã –∫–≤–µ—Å—Ç–æ–≤:**
- `daily` - —Å–±—Ä–æ—Å –≤ –ø–æ–ª–Ω–æ—á—å
- `weekly` - —Å–±—Ä–æ—Å –∫–∞–∂–¥—ã–µ 7 –¥–Ω–µ–π
- `one_time` - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑

**–î–µ–π—Å—Ç–≤–∏—è:**
- `play` - —Å—ã–≥—Ä–∞—Ç—å N –∏–≥—Ä
- `win` - –≤—ã–∏–≥—Ä–∞—Ç—å N —Ä–∞–∑
- `lose` - –ø—Ä–æ–∏–≥—Ä–∞—Ç—å N —Ä–∞–∑
- `spend_gems` - –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å gems
- `earn_gems` - –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å gems

**–ü—Ä–∏–≤—è–∑–∫–∞ –∫ –∏–≥—Ä–∞–º:**
`game_type`: `rps`, `mines`, `coinflip`, `case`, `any`, –∏–ª–∏ NULL (–ª—é–±–∞—è)

---

### Middleware

| Middleware | –§—É–Ω–∫—Ü–∏—è |
|------------|---------|
| JWT Auth | –í–∞–ª–∏–¥–∞—Ü–∏—è Bearer —Ç–æ–∫–µ–Ω–∞ |
| Rate Limit (Redis) | 10 req/min –¥–ª—è API, 5 req/min –¥–ª—è auth |
| Rate Limit (Memory) | Fallback –µ—Å–ª–∏ Redis –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω |
| Telegram Auth | –í–∞–ª–∏–¥–∞—Ü–∏—è initData —á–µ—Ä–µ–∑ HMAC-SHA256 |
| Metrics | Prometheus –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è rate limiting |

---

## Frontend - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### –°—Ç—Ä–∞–Ω–∏—Ü—ã (4 —Å—Ç—Ä–∞–Ω–∏—Ü—ã)

#### Games Page (`/`)
- –°–ø–∏—Å–æ–∫ –∏–∑ 3 –∏–≥—Ä: Coin Flip, RPS, Mines
- –ö–∞—Ä—Ç–æ—á–∫–∏ —Å –∏–∫–æ–Ω–∫–∞–º–∏, –æ–ø–∏—Å–∞–Ω–∏—è–º–∏, –º–Ω–æ–∂–∏—Ç–µ–ª—è–º–∏
- –ë–µ–π–¥–∂–∏ PvP –¥–ª—è –∏–≥—Ä —Å –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–æ–º
- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞ (PvE/PvP)

#### Cases Page (`/cases`)
- –û—Ç–∫—Ä—ã—Ç–∏–µ –ª—É—Ç–±–æ–∫—Å–æ–≤ –∑–∞ 100 gems
- 5 —É—Ä–æ–≤–Ω–µ–π —Ä–µ–¥–∫–æ—Å—Ç–∏ —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏
- –ê–Ω–∏–º–∞—Ü–∏—è –≤—Ä–∞—â–µ–Ω–∏—è (2 —Å–µ–∫)
- –¢–∞–±–ª–∏—Ü–∞ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø—Ä–∏–∑–æ–≤

#### Leaderboard Page (`/top`)
- –¢–æ–ø –∏–≥—Ä–æ–∫–æ–≤ –ø–æ –º–µ—Å—è—á–Ω—ã–º –ø–æ–±–µ–¥–∞–º
- –ú–µ–¥–∞–ª–∏ –¥–ª—è —Ç–æ–ø-3 (ü•áü•àü•â)
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ: –∏–º—è, wins, games, gems

#### Profile Page (`/profile`)
**3 –≤–∫–ª–∞–¥–∫–∏:**

| –í–∫–ª–∞–¥–∫–∞ | –°–æ–¥–µ—Ä–∂–∏–º–æ–µ |
|---------|------------|
| Stats | –ú–µ—Å—è—á–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –∏–≥—Ä—ã, –ø–æ–±–µ–¥—ã, –ø—Ä–æ–∏–≥—Ä—ã—à–∏, win rate |
| History | –ü–æ—Å–ª–µ–¥–Ω–∏–µ 20 –∏–≥—Ä —Å —Å—É–º–º–∞–º–∏ |
| Quests | –ê–∫—Ç–∏–≤–Ω—ã–µ –∫–≤–µ—Å—Ç—ã —Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞–º–∏ –∏ –∫–Ω–æ–ø–∫–æ–π claim |

---

### –ò–≥—Ä–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### PvE –∏–≥—Ä—ã
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|----------|
| `CoinFlipGame` | –ê–Ω–∏–º–∞—Ü–∏—è –º–æ–Ω–µ—Ç–∫–∏, –≤–≤–æ–¥ —Å—Ç–∞–≤–∫–∏, —Ä–µ–∑—É–ª—å—Ç–∞—Ç |
| `RPSGame` | 3 –∫–Ω–æ–ø–∫–∏ (‚úä‚úã‚úåÔ∏è), –±–∏—Ç–≤–∞ —Å –±–æ—Ç–æ–º |
| `MinesGame` | –°–µ—Ç–∫–∞ 4√ó3, –≤—ã–±–æ—Ä —è—á–µ–π–∫–∏, –ø–æ–∫–∞–∑ –º–∏–Ω |

#### PvP –∏–≥—Ä—ã
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|----------|
| `PvPRPSGame` | WebSocket –º–∞—Ç—á–º–µ–π–∫–∏–Ω–≥, –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä |
| `PvPMinesGame` | Setup —Ñ–∞–∑–∞ + Playing —Ñ–∞–∑–∞, 5 —Ä–∞—É–Ω–¥–æ–≤ |
| `GameModeSelector` | –ú–æ–¥–∞–ª–∫–∞ –≤—ã–±–æ—Ä–∞ PvE/PvP |

---

### UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –í–∞—Ä–∏–∞–Ω—Ç—ã/–§—É–Ω–∫—Ü–∏–∏ |
|-----------|------------------|
| `Button` | primary, secondary, success, danger, ghost + —Ä–∞–∑–º–µ—Ä—ã sm/md/lg/xl |
| `Card` | Glass-morphism —ç—Ñ—Ñ–µ–∫—Ç, –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ—Å—Ç—å |
| `Input` | –û–±—ã—á–Ω—ã–π input + `BetInput` —Å –ø—Ä–µ—Å–µ—Ç–∞–º–∏ (10, 50, 100, 500) |
| `Overlay` | Bottom sheet —Å drag handle |
| `Modal` | –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ |

---

### React —Ö—É–∫–∏

| –•—É–∫ | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç |
|-----|------------|
| `useAuth` | `{ user, loading, error, login, setUser }` |
| `useProfile` | `{ games, stats, quests, loading, fetchProfile, addGems }` |
| `useWebSocket` | `{ status, opponent, roomId, gameState, result, connect, send, disconnect }` |

---

### API —Ñ—É–Ω–∫—Ü–∏–∏

```javascript
// auth.js
authenticate()                    // POST /auth
getMe()                          // GET /me
getMyProfile()                   // GET /profile
updateBalance(amount, reason)    // POST /profile/balance

// games.js
playCoinFlip(bet)               // POST /game/coinflip
playRPS(bet, move)              // POST /game/rps
playMines(bet, pick)            // POST /game/mines
spinCase()                      // POST /game/case
getMyGames()                    // GET /me/games
getTopUsers()                   // GET /top

// quests.js
getQuests()                     // GET /quests
getMyQuests()                   // GET /me/quests
claimQuestReward(questId)       // POST /quests/:id/claim
```

---

### –ê–Ω–∏–º–∞—Ü–∏–∏ –∏ UI/UX

| –ê–Ω–∏–º–∞—Ü–∏—è | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ |
|----------|------------|
| `fadeIn` | –ü–æ—è–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü |
| `slideUp` | –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã |
| `pulse` | –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å—Ç–∞—Ç—É—Å–∞, –∑–∞–≥—Ä—É–∑–∫–∞ |
| `spin-slow` | –í—Ä–∞—â–µ–Ω–∏–µ –º–æ–Ω–µ—Ç–∫–∏ (3 —Å–µ–∫) |

**–í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã:**
- Glass-morphism (frosted glass)
- Gradient text –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- Button glow –ø—Ä–∏ hover
- –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞: Indigo (#6366f1) + Purple (#8b5cf6)

---

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü—ã

#### users
```sql
id          BIGSERIAL PRIMARY KEY
tg_id       BIGINT UNIQUE NOT NULL
username    VARCHAR(255)
first_name  VARCHAR(255)
gems        BIGINT DEFAULT 10000    -- –ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å
created_at  TIMESTAMP DEFAULT NOW()
```

#### game_history
```sql
id          BIGSERIAL PRIMARY KEY
user_id     BIGINT REFERENCES users(id)
game_type   VARCHAR(50)             -- coinflip, rps, mines, case
mode        VARCHAR(20)             -- pve, pvp, solo
opponent_id BIGINT                  -- –¥–ª—è PvP
room_id     VARCHAR(100)            -- –¥–ª—è PvP
result      VARCHAR(20)             -- win, lose, draw
bet_amount  BIGINT
win_amount  BIGINT                  -- –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º
details     JSONB                   -- moves, picks, –∏ —Ç.–¥.
created_at  TIMESTAMP DEFAULT NOW()
```

#### transactions
```sql
id          BIGSERIAL PRIMARY KEY
user_id     BIGINT REFERENCES users(id)
type        VARCHAR(50)             -- coinflip, rps, quest_reward, etc.
amount      BIGINT                  -- –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º
meta        JSONB
created_at  TIMESTAMP DEFAULT NOW()
```

#### quests
```sql
id           BIGSERIAL PRIMARY KEY
quest_type   VARCHAR(20)            -- daily, weekly, one_time
title        VARCHAR(255)
description  TEXT
game_type    VARCHAR(50)            -- rps, mines, any, NULL
action_type  VARCHAR(50)            -- play, win, lose, spend_gems
target_count INT
reward_gems  BIGINT
is_active    BOOLEAN DEFAULT TRUE
sort_order   INT DEFAULT 0
```

#### user_quests
```sql
id              BIGSERIAL PRIMARY KEY
user_id         BIGINT REFERENCES users(id)
quest_id        BIGINT REFERENCES quests(id)
current_count   INT DEFAULT 0
completed       BOOLEAN DEFAULT FALSE
reward_claimed  BOOLEAN DEFAULT FALSE
period_start    TIMESTAMP           -- –¥–ª—è daily/weekly reset
completed_at    TIMESTAMP
reward_claimed_at TIMESTAMP
```

#### games (legacy - –¥–ª—è PvP)
```sql
id           BIGSERIAL PRIMARY KEY
room_id      VARCHAR(100)
player_a_id  BIGINT
player_b_id  BIGINT
moves        JSONB
winner_id    BIGINT
created_at   TIMESTAMP DEFAULT NOW()
```

---

## –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# Backend
cd backend
cp .env.example .env
# –ó–∞–ø–æ–ª–Ω–∏—Ç—å: DATABASE_URL, JWT_SECRET, BOT_TOKEN, DEV_MODE=true
go run ./cmd/app

# Frontend
cd frontend-new
npm install
npm run dev
```

### Production (VPS)

```bash
# 1. PostgreSQL
sudo -u postgres createdb telegram_webapp
psql -d telegram_webapp -f backend/migrations/001_init.sql

# 2. Backend
cd backend
go build -o app ./cmd/app
./app &

# 3. Frontend
cd frontend-new
npm run build
# –§–∞–π–ª—ã –≤ dist/

# 4. Nginx
# –ü—Ä–æ–∫—Å–∏ /api –∏ /ws –Ω–∞ localhost:8080
# –°—Ç–∞—Ç–∏–∫–∞ –∏–∑ dist/
```

### Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

1. –°–æ–∑–¥–∞—Ç—å –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/BotFather)
2. –ü–æ–ª—É—á–∏—Ç—å BOT_TOKEN
3. `/mybots` ‚Üí Bot Settings ‚Üí Menu Button ‚Üí URL: `https://your-domain.com`

---

## –ò–¥–µ–∏ –¥–ª—è –º–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏–∏

### –ù–æ–≤—ã–µ –∏–≥—Ä—ã

#### Dice (–ö–æ—Å—Ç–∏)
- –£–≥–∞–¥–∞–π —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 6
- –ú–Ω–æ–∂–∏—Ç–µ–ª—å x6 –ø—Ä–∏ —Ç–æ—á–Ω–æ–º –ø–æ–ø–∞–¥–∞–Ω–∏–∏
- –ú–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫–∏ –Ω–∞ –¥–∏–∞–ø–∞–∑–æ–Ω (1-3 –∏–ª–∏ 4-6) —Å x2

#### Blackjack
- –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –±–ª—ç–∫–¥–∂–µ–∫ –ø—Ä–æ—Ç–∏–≤ –¥–∏–ª–µ—Ä–∞
- Hit, Stand, Double Down, Split
- x2.5 –ø—Ä–∏ –±–ª—ç–∫–¥–∂–µ–∫–µ, x2 –ø—Ä–∏ –æ–±—ã—á–Ω–æ–π –ø–æ–±–µ–¥–µ

#### Crash
- –ú–Ω–æ–∂–∏—Ç–µ–ª—å —Ä–∞—Å—Ç—ë—Ç –æ—Ç x1.00
- –ù—É–∂–Ω–æ –∑–∞–±—Ä–∞—Ç—å –¥–æ –∫—Ä–∞—à–∞
- –°–æ—Ü–∏–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç: –≤–∏–¥–Ω–æ —Å—Ç–∞–≤–∫–∏ –¥—Ä—É–≥–∏—Ö

#### Slots (–°–ª–æ—Ç—ã)
- 3x3 –±–∞—Ä–∞–±–∞–Ω —Å —Å–∏–º–≤–æ–ª–∞–º–∏
- –†–∞–∑–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ = —Ä–∞–∑–Ω—ã–µ –º–Ω–æ–∂–∏—Ç–µ–ª–∏
- –ë–æ–Ω—É—Å-–∏–≥—Ä—ã –ø—Ä–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–∞—Ö

#### Wheel of Fortune
- –ö–æ–ª–µ—Å–æ —Å —Å–µ–∫—Ç–æ—Ä–∞–º–∏ —Ä–∞–∑–Ω–æ–π —Ü–µ–Ω–Ω–æ—Å—Ç–∏
- –ê–Ω–∏–º–∞—Ü–∏—è –≤—Ä–∞—â–µ–Ω–∏—è
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ–∫—Ç–æ—Ä—ã: x10, –¥–∂–µ–∫–ø–æ—Ç, –±–æ–Ω—É—Å-—Å–ø–∏–Ω

---

### PvP —É–ª—É—á—à–µ–Ω–∏—è

#### –¢—É—Ä–Ω–∏—Ä—ã
- Bracket-—Å–∏—Å—Ç–µ–º–∞ (8/16/32 –∏–≥—Ä–æ–∫–∞)
- Entry fee + –ø—Ä–∏–∑–æ–≤–æ–π —Ñ–æ–Ω–¥
- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–æ–≤
- –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤ —Ç—É—Ä–Ω–∏—Ä–∞

#### –†–µ–π—Ç–∏–Ω–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
- ELO —Ä–µ–π—Ç–∏–Ω–≥ –¥–ª—è –∫–∞–∂–¥–æ–π –∏–≥—Ä—ã
- –†–∞–Ω–≥–∏: Bronze ‚Üí Silver ‚Üí Gold ‚Üí Diamond
- –ú–∞—Ç—á–º–µ–π–∫–∏–Ω–≥ –ø–æ —Ä–∞–Ω–≥—É
- –°–µ–∑–æ–Ω–Ω—ã–µ —Å–±—Ä–æ—Å—ã —Å –Ω–∞–≥—Ä–∞–¥–∞–º–∏

#### –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã
- –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã –ø–æ –∫–æ–¥—É
- –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –¥—Ä—É–∑–µ–π
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∞–≤–∫–∏

---

### –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### –î—Ä—É–∑—å—è
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ Telegram username
- –°–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π —Å –æ–Ω–ª–∞–π–Ω-—Å—Ç–∞—Ç—É—Å–æ–º
- –ë—ã—Å—Ç—Ä—ã–π –≤—ã–∑–æ–≤ –Ω–∞ –∏–≥—Ä—É
- –ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä —Å –¥—Ä—É–≥–æ–º

#### –ß–∞—Ç
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π —á–∞—Ç
- –ß–∞—Ç –≤ –∫–æ–º–Ω–∞—Ç–µ PvP
- –≠–º–æ–¥–∑–∏-—Ä–µ–∞–∫—Ü–∏–∏
- –°–∏—Å—Ç–µ–º–∞ —Ä–µ–ø–æ—Ä—Ç–æ–≤

#### –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- –ë–µ–π–¥–∂–∏ –∑–∞ milestone (100 –ø–æ–±–µ–¥, –ø–µ—Ä–≤—ã–π –¥–∂–µ–∫–ø–æ—Ç)
- –†–µ–¥–∫–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª–µ
- –ù–∞–≥—Ä–∞–¥—ã gems –∑–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ

---

### –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è

#### Premium –ø–æ–¥–ø–∏—Å–∫–∞
- –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å (+10%)
- –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –∏–≥—Ä—ã
- –ë–µ–∑ —Ä–µ–∫–ª–∞–º—ã
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –±–µ–π–¥–∂

#### –ú–∞–≥–∞–∑–∏–Ω
- –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª—è (–∞–≤–∞—Ç–∞—Ä—ã, —Ä–∞–º–∫–∏)
- –û—Å–æ–±—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–æ–±–µ–¥
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ —ç–º–æ–¥–∑–∏ –≤ —á–∞—Ç–µ

#### –†–µ–∫–ª–∞–º–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- Rewarded ads: –ø–æ—Å–º–æ—Ç—Ä–∏ —Ä–µ–∫–ª–∞–º—É ‚Üí –ø–æ–ª—É—á–∏ gems
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Ads

---

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

#### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- Redis –¥–ª—è —Å–µ—Å—Å–∏–π –∏ rate limiting
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞ (5 –º–∏–Ω TTL)
- CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏

#### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
- –¢—Ä–µ–∫–∏–Ω–≥ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–≥—Ä
- –ú–µ—Ç—Ä–∏–∫–∏ retention –∏ LTV
- –î–∞—à–±–æ—Ä–¥ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤

#### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- Provably Fair —Å–∏—Å—Ç–µ–º–∞ (—Ö—ç—à–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —á–µ—Å—Ç–Ω–æ—Å—Ç–∏)
- –ê–Ω—Ç–∏-—Ñ—Ä–æ–¥: –ª–∏–º–∏—Ç—ã –Ω–∞ –≤—ã–≤–æ–¥, –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
- 2FA –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- Audit log –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

#### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ WebSocket —á–µ—Ä–µ–∑ Redis pub/sub
- –®–∞—Ä–¥–∏–Ω–≥ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- Kubernetes deployment
- –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã

---

### UX —É–ª—É—á—à–µ–Ω–∏—è

#### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Telegram
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ daily –∫–≤–µ—Å—Ç–∞—Ö
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ç—É—Ä–Ω–∏—Ä–∞—Ö

#### Onboarding
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ç—É—Ç–æ—Ä–∏–∞–ª
- –ë–æ–Ω—É—Å –∑–∞ –ø–µ—Ä–≤—É—é –∏–≥—Ä—É
- –ü–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤

#### –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ EN/RU/UA/KZ
- –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ –∏–∑ Telegram
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª –ø–æ –ª–æ–∫–∞–ª–∏

#### Accessibility
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ screen readers
- –í—ã—Å–æ–∫–æ–∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–π —Ä–µ–∂–∏–º
- –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
- Keyboard navigation

---

### –ì–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è

#### Battle Pass
- –°–µ–∑–æ–Ω–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å (30 –¥–Ω–µ–π)
- –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∏ –ø—Ä–µ–º–∏—É–º —Ç—Ä–µ–∫
- –ù–∞–≥—Ä–∞–¥—ã –∑–∞ —É—Ä–æ–≤–Ω–∏
- –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ —Å–∫–∏–Ω—ã –≤ –∫–æ–Ω—Ü–µ —Å–µ–∑–æ–Ω–∞

#### Daily Rewards
- –ó–∞—Ö–æ–¥–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å ‚Üí –ø–æ–ª—É—á–∞–π gems
- Streak —Å–∏—Å—Ç–µ–º–∞ (7 –¥–Ω–µ–π = –±–æ–ª—å—à–æ–π –±–æ–Ω—É—Å)
- –ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã —Ä–∞–∑ –≤ –¥–µ–Ω—å

#### –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- –£–Ω–∏–∫–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –¥–ª—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
- % –æ—Ç –≤—ã–∏–≥—Ä—ã—à–µ–π –¥—Ä—É–≥–∞ (–ø–µ—Ä–≤—ã–µ 30 –¥–Ω–µ–π)
- –ë–æ–Ω—É—Å—ã –∑–∞ milestone (10, 50, 100 —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤)

---

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| API Endpoints | 19 |
| WebSocket —Å–æ–æ–±—â–µ–Ω–∏–π | 7 —Ç–∏–ø–æ–≤ |
| –ò–≥—Ä | 4 (CoinFlip, RPS, Mines, Case) |
| –†–µ–∂–∏–º–æ–≤ | 3 (PvE, PvP, Solo) |
| React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ | 20+ |
| –¢–∞–±–ª–∏—Ü –≤ –ë–î | 6 |

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

---

*–°–æ–∑–¥–∞–Ω–æ —Å –ø–æ–º–æ—â—å—é Claude Code*
